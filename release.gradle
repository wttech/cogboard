import java.util.regex.Matcher

release {
    failOnCommitNeeded = true
    failOnPublishNeeded = true
    failOnSnapshotDependencies = true
    failOnUnversionedFiles = true
    failOnUpdateNeeded = true
    revertOnFail = true
    preCommitText = ''
    preTagCommitMessage = '[Gradle Release Plugin] Releasing: '
    tagCommitMessage = '[Gradle Release Plugin] Creating tag: '
    newVersionCommitMessage = '[Gradle Release Plugin] Setting new version: '
    tagTemplate = 'v${version}'
    versionPropertyFile = 'gradle.properties'
    versionPatterns = [
        /[.]*\.(\d+)\.(\d+)[.]*/: { Matcher m, Project p -> m.replaceAll(".${(m[0][1] as int) + 1}.0") }
    ]
    buildTasks=['release']
    git {
        requireBranch = 'master'
    }
}
